controllers:
  main:
    type: deployment
    strategy: Recreate
    enabled: true
    containers:
      frigate:
        # dependsOn: vpn
        nameOverride: prowlarr
        image:
          repository: ghcr.io/blakeblackshear/frigate
          tag: latest
          # vpn:
          #   nameOverride: vpn
          #   image:
          #     repository: linuxserver/wireguard
          #     pullPolicy: IfNotPresent

          # securityContext:
          #   capabilities:
          #     add: ["NET_ADMIN", "SYS_MODULE"]
env:
- name: PUID
  valueFrom:
    configMapKeyRef:
      name: common-conf
      key: NFS_PUID
- name: PGID
  valueFrom:
    configMapKeyRef:
      name: common-conf
      key: NFS_PGID
- name: TZ
  valueFrom:
    configMapKeyRef:
      name: common-conf
      key: TZ

service:
  main:
    ports:
      http:
        port: 9696

persistence:
  config:
    enabled: true
    storageClass: longhorn
    size: 1Gi
    retain: true
    accessMode: ReadWriteOnce
